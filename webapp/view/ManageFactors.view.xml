<mvc:View
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    controllerName="ESGAdmin.ESGAdmin.controller.ManageFactors"
>
    <Page title="Manage Factors">
        <customHeader>
            <OverflowToolbar>
                <Button
                    icon="sap-icon://nav-back"
                    tooltip="{i18n>back}"
                    press="onNavBack"
                />
                <Image
                    src="./assets/ESG Kosh.png"
                    class="sapUiMediumMargin"
                    width="60px"
                    press="onHomePress"
                />
                <ToolbarSpacer />
                <Title text="Manage Factors" />
                <ToolbarSpacer />
                <HBox alignItems="Center">
                    <Button
                        icon="sap-icon://bell"
                        tooltip="Notifications"
                        press="onNotificationPress"
                    />
                    <Button
                        icon="sap-icon://log"
                        tooltip="Log Out"
                        press="onLogOut"
                    />
                </HBox>
            </OverflowToolbar>
        </customHeader>
        <content>
            <VBox>
                <VBox class="sapUiSmallMargin">
                    <!-- Filter Inputs -->
                    <HBox>
                        <VBox>
                            <Select
                                id="filterScope"
                                selectedKey="Scope 1"
                                change="onChangeScope"
                            >
                                <core:Item
                                    key="Scope1"
                                    text="Scope 1"
                                />
                                <core:Item
                                    key="Scope2"
                                    text="Scope 2"
                                />
                                <core:Item
                                    key="Scope3"
                                    text="Scope 3"
                                />
                            </Select>
                        </VBox>
                        <VBox class="sapUiSmallMarginBegin">
                            <MultiComboBox
                                id="level1ComboBox"
                                items="{level1Model>/results}"
                                selectionChange="onFilterChange"
                            >
                                <core:Item
                                    key="{level1Model>key}"
                                    text="{level1Model>text}"
                                />
                            </MultiComboBox>
                        </VBox>
                        <VBox class="sapUiSmallMarginBegin">
                            <MultiComboBox
                                id="level2ComboBox"
                                items="{level2Model>/results}"
                                selectionChange="onFilterChange"
                            >
                                <core:Item
                                    key="{level2Model>key}"
                                    text="{level2Model>text}"
                                />
                            </MultiComboBox>
                        </VBox>
                        <VBox class="sapUiSmallMarginBegin">
                            <MultiComboBox
                                id="level3ComboBox"
                                items="{level3Model>/results}"
                                selectionChange="onFilterChange"
                            >
                                <core:Item
                                    key="{level3Model>key}"
                                    text="{level3Model>text}"
                                />
                            </MultiComboBox>
                        </VBox>
                        <Button
                            class="sapUiSmallMarginBegin"
                            text="Search"
                            press="onSearch"
                        />
                    </HBox>
                </VBox>
                <!-- Table -->
                <Table
                    id="ghgTable"
                    items="{factorData>/results}"
                    headerText="{= ${factorData>/results}.length + ' Factors'}"
                    updateFinished="onUpdateFinished"
                >
                    <columns>
                        <Column>
                            <Text text="ID" />
                        </Column>
                        <Column>
                            <Text text="Scope" />
                        </Column>
                        <Column>
                            <Text text="Level 1" />
                        </Column>
                        <Column>
                            <Text text="Level 2" />
                        </Column>
                        <Column>
                            <Text text="Level 3" />
                        </Column>
                        <Column>
                            <Text text="UOM" />
                        </Column>
                        <Column>
                            <Text text="Lookup" />
                        </Column>
                        <Column>
                            <Text text="GHG Conversion" />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem>
                            <Text text="{factorData>ID}" />
                            <Text text="{factorData>Scope}" />
                            <Text text="{factorData>Level 1}" />
                            <Text text="{factorData>Level 2}" />
                            <Text text="{factorData>Level 3}" />
                            <Text text="{factorData>UOM}" />
                            <Text text="{factorData>Lookup}" />
                            <Input
                                value="{factorData>GHG Conversion}"
                                change="onGHGConversionChange"
                            />
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </content>
        <footer>
            <OverflowToolbar>
                <ToolbarSpacer />
                <Button
                    text="Save"
                    icon="sap-icon://save"
                    press="onSaveChanges"
                    type="Emphasized"
                    visible="true"
                />
                <Button
                    text="Reset"
                    icon="sap-icon://reset"
                    press="onResetFilters"
                />
                <Button
                    text="Upload Default"
                    icon="sap-icon://save"
                    press="onUploadDefaultFactor"
                    type="Emphasized"
                    visible="true"
                />
            </OverflowToolbar>
        </footer>
    </Page>
</mvc:View>
